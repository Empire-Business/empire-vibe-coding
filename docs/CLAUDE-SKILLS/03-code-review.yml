name: "code-review"
description: "Revisa c√≥digo fonte verificando qualidade, padr√µes e melhores pr√°ticas"
parameters:
  - name: "filePath"
    description: "Caminho do arquivo ou diret√≥rio para revis√£o"
    required: true
    type: "string"
  - name: "focusAreas"
    description: "√Åreas espec√≠ficas para focar na revis√£o"
    required: false
    type: "array"
    items:
      type: "string"
      enum: ["security", "performance", "accessibility", "types", "testing", "logic", "style", "all"]
    default: ["all"]
  - name: "strictMode"
    description: "Modo estrito com regras mais rigorosas"
    required: false
    type: "boolean"
    default: false
  - name: "includeSuggestions"
    description: "Incluir sugest√µes de melhoria al√©m de problemas"
    required: false
    type: "boolean"
    default: true

steps:
  - name: "read_source"
    description: "L√™ o c√≥digo fonte a ser revisado"

  - name: "run_linting"
    description: "Executa linter para verificar conformidade"

  - name: "check_types"
    description: "Verifica qualidade dos tipos TypeScript"

  - name: "analyze_logic"
    description: "Analisa l√≥gica de neg√≥cio e fluxos"

  - name: "security_scan"
    description: "Scaneia vulnerabilidades de seguran√ßa"

  - name: "check_tests"
    description: "Verifica cobertura e qualidade de testes"

  - name: "generate_report"
    description: "Gera relat√≥rio de revis√£o"

examples:
  - filePath: "src/features/auth/components/LoginForm.tsx"
    focusAreas: ["security", "types", "accessibility"]
    strictMode: true

output_format: |
  ## Code Review: [filename]

  **Data:** [YYYY-MM-DD]
  **Revisor:** Claude Code

  ---

  ### Resumo
  - ‚úÖ Passou: X verifica√ß√µes
  - ‚ö†Ô∏è Warnings: Y
  - ‚ùå Erros: Z

  ---

  ### ‚úÖ Verifica√ß√µes OK
  - [ ] ESLint passou
  - [ ] Tipos TypeScript v√°lidos
  - [ ] Acessibilidade b√°sica
  - [ ] Tratamento de erros

  ---

  ### ‚ö†Ô∏è Warnings (Recomendado Corrigir)

  **1. [Nome do Warning]**
  ```
  [C√≥digo com problema]
  ```
  **Sugest√£o:**
  ```
  [C√≥digo melhorado]
  ```
  **Justificativa:** [Raz√£o t√©cnica]

  ---

  ### ‚ùå Erros (Precisa Corrigir)

  **1. [Nome do Erro]** [Severidade: Alta/M√©dia/Baixa]
  ```
  [C√≥digo problem√°tico]
  ```
  **Problema:** [Explica√ß√£o]
  **Corre√ß√£o:**
  ```typescript
  [C√≥digo corrigido]
  ```

  ---

  ### üí° Sugest√µes de Melhoria

  - [ ] Extrair l√≥gica para hook reutiliz√°vel
  - [ ] Adicionar documenta√ß√£o JSDoc
  - [ ] Considerar componente menor
  - [ ] Simplificar l√≥gica condicional

  ---

  ### Verifica√ß√µes Espec√≠ficas

  | √Årea | Status | Observa√ß√µes |
  |------|--------|-------------|
  | Security | ‚úÖ/‚ö†Ô∏è/‚ùå | [notas] |
  | Performance | ‚úÖ/‚ö†Ô∏è/‚ùå | [notas] |
  | Types | ‚úÖ/‚ö†Ô∏è/‚ùå | [notas] |
  | Testing | ‚úÖ/‚ö†Ô∏è/‚ùå | [notas] |
  | Accessibility | ‚úÖ/‚ö†Ô∏è/‚ùå | [notas] |

checklist:
  security:
    - "Sem `dangerouslySetInnerHTML` sem sanitiza√ß√£o"
    - "N√£o expor dados sens√≠veis em logs"
    - "Validar inputs com Zod"
    - "Auth checks em todas as APIs"

  performance:
    - "UseMemo/useCallback quando apropriado"
    - "Lazy loading de components"
    - "Evitar deps vazias em useEffect"

  types:
    - "Sem `any` sem justificativa"
    - "Tipos expl√≠citos em APIs"
    - "Interfaces bem definidas"

  accessibility:
    - "Labels em todos os inputs"
    - "Alt text em imagens"
    - "Bot√µes com texto/aria-label"
